(function(e){function t(t){for(var a,i,o=t[0],u=t[1],l=t[2],d=0,p=[];d<o.length;d++)i=o[d],n[i]&&p.push(n[i][0]),n[i]=0;for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&(e[a]=u[a]);c&&c(t);while(p.length)p.shift()();return s.push.apply(s,l||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],a=!0,o=1;o<r.length;o++){var u=r[o];0!==n[u]&&(a=!1)}a&&(s.splice(t--,1),e=i(i.s=r[0]))}return e}var a={},n={app:0},s=[];function i(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=a,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(r,a,function(t){return e[t]}.bind(null,a));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var c=u;s.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"00d1":function(e,t,r){"use strict";var a=r("f378"),n=r.n(a);n.a},2136:function(e,t,r){"use strict";var a=r("ed77"),n=r.n(a);n.a},"3a10":function(e,t,r){},"4ee2":function(e,t,r){},"56d7":function(e,t,r){"use strict";r.r(t);r("cadf"),r("551c");var a=r("2b0e"),n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("Navbar",{attrs:{id:"navbar"}}),r("router-view")],1)},s=[],i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.token?r("div",{attrs:{id:"navbar"}},[r("div",{staticClass:"userfield"},[e._v(e._s(e.username))]),r("div",{staticClass:"navbar-wrapper"},[r("ul",e._l(e.lists,function(t,a){return r("router-link",{key:a,staticClass:"item",attrs:{tag:"li",to:t.hash}},[r("div",{staticClass:"iconfont",domProps:{innerHTML:e._s(t.icon)}}),r("div",{staticClass:"text"},[e._v(e._s(t.name))])])}))]),r("div",{staticClass:"logout",on:{click:e.logout}},[r("div",{staticClass:"iconfont"},[e._v("")]),e._v("登出\n  ")])]):e._e()},o=[],u=r("c93e"),l=r("2f62"),c={name:"Narbar",data:function(){return{lists:[{name:"总览",icon:"&#xe6f7;",hash:"/home"},{name:"图表",icon:"&#xe659;",hash:"/chart"},{name:"here",icon:"&#xe6a3;",hash:"/here"},{name:"there",icon:"&#xe706;",hash:"there"}]}},computed:Object(u["a"])({},Object(l["d"])("login",["token","username"])),methods:Object(u["a"])({},Object(l["c"])("login",["logout"]))},d=c,p=(r("2136"),r("2877")),m=Object(p["a"])(d,i,o,!1,null,"318e7ec7",null),f=m.exports,b={components:{Navbar:f}},g=b,v=Object(p["a"])(g,n,s,!1,null,null,null),h=v.exports,w=r("8c4f"),y=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"admin"}},[r("header",[e._v("卓绝智能后台操作界面")]),r("b-container",[r("div",{staticClass:"title"},[e._v("设备列表")]),r("b-table",{attrs:{striped:"",hover:"",items:e.items,fields:e.fields,bordered:""}})],1),r("b-container",{staticClass:"bv-example-row"},[r("b-row",{attrs:{"align-h":"center"}},[r("b-col",{attrs:{cols:"2"}},[r("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal1",modifiers:{modal1:!0}}],attrs:{size:"lg"}},[e._v("添加设备")])],1)],1)],1),r("b-modal",{ref:"modal",attrs:{id:"modal1",title:"添加设备"},on:{ok:e.handleOk,shown:e.clearData}},[r("b-input-group",{staticClass:"mb-4",attrs:{size:"lg",prepend:"序列号"}},[r("b-form-input",{attrs:{value:e.serialNumber},on:{input:e.updateSerialNumber}})],1),r("b-input-group",{staticClass:"mb-4",attrs:{size:"lg",prepend:"密码"}},[r("b-form-input",{attrs:{value:e.password},on:{input:e.updatePassword}})],1),r("b-form-select",{attrs:{options:e.options,value:e.type},on:{change:e.updateType}})],1)],1)},P=[],k={name:"Admin",data:function(){return{fields:["id","serialNumber","password","type"],selected:null,options:[{value:"C1",text:"C1"},{value:"T3",text:"T3"},{value:"T2",text:"T2"},{value:"T1",text:"T1"},{value:"F1",text:"F1"}]}},created:function(){this.getBackupDevices()},computed:Object(u["a"])({},Object(l["d"])("admin",["items","serialNumber","password","type","error"])),methods:Object(u["a"])({handleOk:function(e){e.preventDefault(),this.serialNumber?this.password?this.type?(this.addDevice(),this.$refs.modal.hide()):alert("请选择类型"):alert("请输入密码"):alert("请输入序列号")}},Object(l["b"])("admin",["getBackupDevices","addDevice"]),Object(l["c"])("admin",["updateSerialNumber","updatePassword","updateType","clearData"]))},_=k,O=(r("ddf7"),Object(p["a"])(_,y,P,!1,null,"4b91eef4",null)),x=O.exports,j=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"login"}},[r("header",[e._v("卓绝智能")]),r("b-container",{staticClass:"wrapper"},[r("b-row",[r("b-col",{staticClass:"tabs"},[r("div",{staticClass:"tab",style:1===e.tabIndex?e.activeStyle:e.nonactiveStyle,on:{click:function(t){e.tabIndex=1}}},[e._v("登录")]),r("div",{staticClass:"tab",style:2===e.tabIndex?e.activeStyle:e.nonactiveStyle,on:{click:function(t){e.tabIndex=2}}},[e._v("注册")])])],1),r("b-row",[r("b-col",{attrs:{lg:"4",md:"8"}},[1===e.tabIndex?r("div",{key:"field1",staticClass:"content"},[r("input",{key:"user1",attrs:{type:"text",placeholder:"用户名"},domProps:{value:e.loginUsername},on:{input:e.updateUser}}),r("br"),r("input",{key:"pwd1",attrs:{type:"password",placeholder:"密码"},domProps:{value:e.loginPassword},on:{input:e.updatePassword,keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.handleLogin(t):null}}}),r("b-alert",{staticClass:"mt-4",attrs:{variant:"warning",show:null!==e.loginError}},[e._v(e._s(e.loginError))]),r("b-button",{staticClass:"mt-4",attrs:{variant:"primary"},on:{click:e.handleLogin}},[e._v("登录")])],1):e._e(),2===e.tabIndex?r("div",{key:"field2",staticClass:"content"},[r("input",{key:"user2",attrs:{type:"text",placeholder:"用户名"},domProps:{value:e.registerUsername},on:{input:e.updateUser1}}),r("br"),r("br"),r("input",{key:"pwd1",attrs:{type:"password",placeholder:"密码"},domProps:{value:e.registerPassword},on:{input:e.updatePassword1}}),r("br"),r("br"),r("input",{key:"pwd2",attrs:{type:"password",placeholder:"再次输入密码"},domProps:{value:e.registerPassword2},on:{input:e.updatePassword2}}),r("b-alert",{staticClass:"mt-4",attrs:{variant:"warning",show:null!==e.registerError}},[e._v(e._s(e.registerError))]),r("b-button",{staticClass:"mt-4",attrs:{variant:"primary"},on:{click:e.handleRegister}},[e._v("创建新帐号")])],1):e._e()])],1)],1)],1)},N=[],C={name:"Login",data:function(){return{tabIndex:1,activeStyle:{borderBottom:"1px solid #6459ed",color:"#6459ed"},nonactiveStyle:{borderBottom:"none",color:"#000000"}}},computed:Object(u["a"])({},Object(l["d"])("login",{loginUsername:function(e){return e.loginUsername},loginPassword:function(e){return e.loginPassword},registerUsername:function(e){return e.registerUsername},registerPassword:function(e){return e.registerPassword},registerPassword2:function(e){return e.registerPassword2},loginError:function(e){return e.loginError},registerError:function(e){return e.registerError}})),methods:Object(u["a"])({},Object(l["b"])("login",["login","register"]),Object(l["c"])("login",["updateLoginUsername","updateLoginPassword","updateRegisterUsername","updateRegisterPassword","updateRegisterPassword2"]),{updateUser:function(e){this.updateLoginUsername(e.target.value.trim())},updatePassword:function(e){this.updateLoginPassword(e.target.value.trim())},updateUser1:function(e){this.updateRegisterUsername(e.target.value.trim())},updatePassword1:function(e){this.updateRegisterPassword(e.target.value.trim())},updatePassword2:function(e){this.updateRegisterPassword2(e.target.value.trim())},handleLogin:function(){this.login()},handleRegister:function(){this.register()}})},D=C,U=(r("f051"),Object(p["a"])(D,j,N,!1,null,"36bfd3be",null)),E=U.exports,L=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"home"}},[r("list")],1)},S=[],T=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"homeList"}},[a("div",{staticClass:"title"},[e._v("设备栏\n    "),a("b-btn",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"modal1",expression:"'modal1'"}],staticStyle:{float:"right"}},[e._v("绑定设备")])],1),a("b-modal",{ref:"modal1",attrs:{id:"modal1",title:"绑定设备"},on:{ok:e.handleOk,shown:e.clearData}},[a("b-input-group",{staticClass:"mb-4",attrs:{size:"lg",prepend:"序列号"}},[a("b-form-input",{attrs:{value:e.serialNumber},on:{input:e.updateSerialNumber}})],1),a("b-input-group",{staticClass:"mb-4",attrs:{size:"lg",prepend:"密码"}},[a("b-form-input",{attrs:{value:e.password},on:{input:e.updatePassword}})],1)],1),a("div",{staticClass:"wrapper"},e._l(e.deviceList,function(t,n){return a("b-card",{key:n,staticClass:"mb-2 mr-4 item",staticStyle:{"max-width":"20rem"},attrs:{title:t.serialNumber?t.serialNumber:t.alias,"img-src":r("7da1"),"img-alt":"Image","img-top":"",tag:"div"}},[a("p",{staticClass:"card-text"},[e._v(e._s(t.status))])])}))],1)},R=[];r("e7ee");var $={name:"DeviceList",data:function(){return{baseUrl:"./../../../../public/device_icon/"}},mounted:function(){this.getDevices()},computed:Object(u["a"])({},Object(l["d"])("home",["deviceList","serialNumber","password"])),methods:Object(u["a"])({},Object(l["b"])("home",["getDevices","bindDevice"]),Object(l["c"])("home",["updateSerialNumber","updatePassword","clearData"]),{handleOk:function(e){e.preventDefault(),this.serialNumber?this.password?(this.bindDevice(),this.$refs.modal1.hide()):alert("请输入密码"):alert("请输入序列号")}})},B=$,I=(r("9223"),Object(p["a"])(B,T,R,!1,null,"00db73b8",null)),z=I.exports,M={name:"Home",components:{List:z},computed:Object(u["a"])({},Object(l["d"])("login",["token"])),mounted:function(){this.token||this.$router.push("/")}},F=M,A=(r("00d1"),Object(p["a"])(F,L,S,!1,null,"04aa317c",null)),H=A.exports;a["a"].use(w["a"]);var J=new w["a"]({routes:[{path:"/",name:"login",component:E},{path:"/home",name:"home",component:H},{path:"/admin",name:"admin",component:x}]}),q=r("bc3a"),G=r.n(q),K=function(){return G.a.create({baseURL:"/api",headers:{Authorization:"Bearer ".concat(Y.state.token)}})},Q={username:null,loginUsername:null,loginPassword:null,registerUsername:null,registerPassword:null,registerPassword2:null,loginError:null,registerError:null,token:null},V={},W={login:function(e){var t=e.state,r=e.commit;return K().post("/auth/login",{username:t.loginUsername,password:t.loginPassword}).then(function(e){r("setToken",e.data.token),r("setUserName",t.loginUsername),r("clearData"),t.loginError&&r("setLoginError",null),J.push("/home")}).catch(function(e){var t=e.response,a=t.data[0].message;"Cannot find user with provided username"===a?r("setLoginError","用户名不存在"):"Invalid user password"===a&&r("setLoginError","密码错误")})},register:function(e){var t=e.state,r=e.commit;if(t.registerPassword===t.registerPassword2)return K().post("/auth/register",{username:t.registerUsername,password:t.registerPassword}).then(function(e){r("setToken",e.data.token),r("setUserName",t.registerUsername),r("clearData"),J.push("/home")}).catch(function(e){r("setRegisterError","账号已存在")});r("setRegisterError","密码需一致")}},X={updateLoginUsername:function(e,t){e.loginUsername=t},updateLoginPassword:function(e,t){e.loginPassword=t},updateRegisterUsername:function(e,t){e.registerUsername=t},updateRegisterPassword:function(e,t){e.registerPassword=t},updateRegisterPassword2:function(e,t){e.registerPassword2=t},setToken:function(e,t){e.token=t},setLoginError:function(e,t){e.loginError=t},setRegisterError:function(e,t){e.registerError=t},logout:function(e){e.token=null,J.push("/")},setUserName:function(e,t){e.username=t},clearData:function(e){e.loginUsername=null,e.loginPassword=null,e.registerUsername=null,e.registerPassword=null,e.registerPassword2=null}},Y={namespaced:!0,state:Q,getters:V,actions:W,mutations:X},Z={deviceList:null,serialNumber:null,password:null},ee={},te={getDevices:function(e){e.state;var t=e.commit;return K().get("/devices").then(function(e){var r=e.data;t("setDeviceList",r)}).catch(function(e){console.log(e)})},bindDevice:function(e){var t=e.state,r=(e.commit,e.dispatch);return K().post("/devices",{serialNumber:t.serialNumber,password:t.password}).then(function(e){e.data.msg?alert(e.data.msg):r("getDevices")}).catch(function(e){console.log(e)})}},re={setDeviceList:function(e,t){e.deviceList=t},updateSerialNumber:function(e,t){e.serialNumber=t},updatePassword:function(e,t){e.password=t},clearData:function(e){e.serialNumber=null,e.password=null}},ae={namespaced:!0,state:Z,getters:ee,actions:te,mutations:re},ne={items:null,serialNumber:null,password:null,type:null},se={},ie={getBackupDevices:function(e){e.state;var t=e.commit;return K().get("/backup").then(function(e){var r=e.data;t("setBackupDevices",r)}).catch(function(e){var t=e.err;console.log(t)})},addDevice:function(e){var t=e.state,r=e.commit,a=e.dispatch;return K().post("/backup",{serialNumber:t.serialNumber,password:t.password,type:t.type}).then(function(e){r("clearData"),a("getBackupDevices")}).catch(function(e){e.response;alert("序列号或密码不能重复，请检查")})}},oe={setBackupDevices:function(e,t){e.items=t},updateSerialNumber:function(e,t){e.serialNumber=t},updatePassword:function(e,t){e.password=t},updateType:function(e,t){e.type=t},clearData:function(e){e.serialNumber=null,e.password=null,e.type=null}},ue={namespaced:!0,state:ne,getters:se,actions:ie,mutations:oe};a["a"].use(l["a"]);var le=new l["a"].Store({modules:{login:Y,home:ae,admin:ue},state:{},mutations:{},actions:{}}),ce=r("9f7b");r("f9e3"),r("2dd8"),r("b277"),r("4ee2"),r("3a10");a["a"].use(ce["a"]),a["a"].config.productionTip=!1,new a["a"]({router:J,store:le,render:function(e){return e(h)}}).$mount("#app")},"7da1":function(e,t,r){e.exports=r.p+"img/C1.dff30799.png"},"8cf5":function(e,t,r){},9223:function(e,t,r){"use strict";var a=r("8cf5"),n=r.n(a);n.a},b1b5:function(e,t,r){},b277:function(e,t,r){},cea0:function(e,t,r){},ddf7:function(e,t,r){"use strict";var a=r("cea0"),n=r.n(a);n.a},e7ee:function(e,t){function r(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}r.keys=function(){return[]},r.resolve=r,e.exports=r,r.id="e7ee"},ed77:function(e,t,r){},f051:function(e,t,r){"use strict";var a=r("b1b5"),n=r.n(a);n.a},f378:function(e,t,r){}});
//# sourceMappingURL=app.23230f9f.js.map
(function(e){function t(t){for(var n,o,i=t[0],u=t[1],c=t[2],d=0,p=[];d<i.length;d++)o=i[d],a[o]&&p.push(a[o][0]),a[o]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(e[n]=u[n]);l&&l(t);while(p.length)p.shift()();return s.push.apply(s,c||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],n=!0,i=1;i<r.length;i++){var u=r[i];0!==a[u]&&(n=!1)}n&&(s.splice(t--,1),e=o(o.s=r[0]))}return e}var n={},a={app:0},s=[];function o(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=n,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(r,n,function(t){return e[t]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var l=u;s.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"1cad":function(e,t,r){},"20ba":function(e,t,r){},"2eac":function(e,t,r){"use strict";var n=r("a72c"),a=r.n(n);a.a},"3a10":function(e,t,r){},"4ee2":function(e,t,r){},"54cc":function(e,t,r){"use strict";var n=r("1cad"),a=r.n(n);a.a},"56d7":function(e,t,r){"use strict";r.r(t);r("cadf"),r("551c");var n=r("2b0e"),a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("Navbar",{attrs:{id:"navbar"}}),r("router-view")],1)},s=[],o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.token?r("div",{attrs:{id:"navbar"}},[r("div",{staticClass:"userfield"},[e._v(e._s(e.loginUsername))]),r("div",{staticClass:"navbar-wrapper"},[r("ul",e._l(e.lists,function(t,n){return r("router-link",{key:n,staticClass:"item",attrs:{tag:"li",to:t.hash}},[r("div",{staticClass:"iconfont",domProps:{innerHTML:e._s(t.icon)}}),r("div",{staticClass:"text"},[e._v(e._s(t.name))])])}))]),r("div",{staticClass:"logout",on:{click:e.logout}},[r("div",{staticClass:"iconfont"},[e._v("")]),e._v("登出\n  ")])]):e._e()},i=[],u=r("c93e"),c=r("2f62"),l={name:"Narbar",data:function(){return{lists:[{name:"总览",icon:"&#xe6f7;",hash:"/home"},{name:"图表",icon:"&#xe659;",hash:"/chart"},{name:"here",icon:"&#xe6a3;",hash:"/here"},{name:"there",icon:"&#xe706;",hash:"there"}]}},computed:Object(u["a"])({},Object(c["d"])("login",["token","loginUsername"])),methods:Object(u["a"])({},Object(c["c"])("login",["logout"]))},d=l,p=(r("54cc"),r("2877")),g=Object(p["a"])(d,o,i,!1,null,"308f0797",null),f=g.exports,m={components:{Navbar:f}},v=m,b=Object(p["a"])(v,a,s,!1,null,null,null),h=b.exports,w=r("8c4f"),P=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"login"}},[r("header",[e._v("卓绝智能")]),r("b-container",{staticClass:"wrapper"},[r("b-row",[r("b-col",{staticClass:"tabs"},[r("div",{staticClass:"tab",style:1===e.tabIndex?e.activeStyle:e.nonactiveStyle,on:{click:function(t){e.tabIndex=1}}},[e._v("登录")]),r("div",{staticClass:"tab",style:2===e.tabIndex?e.activeStyle:e.nonactiveStyle,on:{click:function(t){e.tabIndex=2}}},[e._v("注册")])])],1),r("b-row",[r("b-col",{attrs:{lg:"4",md:"8"}},[1===e.tabIndex?r("div",{key:"field1",staticClass:"content"},[r("input",{key:"user1",attrs:{type:"text",placeholder:"用户名"},domProps:{value:e.loginUsername},on:{input:e.updateUser}}),r("br"),r("input",{key:"pwd1",attrs:{type:"password",placeholder:"密码"},domProps:{value:e.loginPassword},on:{input:e.updatePassword,keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.handleLogin(t):null}}}),r("b-alert",{staticClass:"mt-4",attrs:{variant:"warning",show:null!==e.loginError}},[e._v(e._s(e.loginError))]),r("b-button",{staticClass:"mt-4",attrs:{variant:"primary"},on:{click:e.handleLogin}},[e._v("登录")])],1):e._e(),2===e.tabIndex?r("div",{key:"field2",staticClass:"content"},[r("input",{key:"user2",attrs:{type:"text",placeholder:"用户名"},domProps:{value:e.registerUsername},on:{input:e.updateUser1}}),r("br"),r("br"),r("input",{key:"pwd1",attrs:{type:"password",placeholder:"密码"},domProps:{value:e.registerPassword},on:{input:e.updatePassword1}}),r("br"),r("br"),r("input",{key:"pwd2",attrs:{type:"password",placeholder:"再次输入密码"},domProps:{value:e.registerPassword2},on:{input:e.updatePassword2}}),r("b-alert",{staticClass:"mt-4",attrs:{variant:"warning",show:null!==e.registerError}},[e._v(e._s(e.registerError))]),r("b-button",{staticClass:"mt-4",attrs:{variant:"primary"},on:{click:e.handleRegister}},[e._v("创建新帐号")])],1):e._e()])],1)],1)],1)},y=[],_={name:"Login",data:function(){return{tabIndex:1,activeStyle:{borderBottom:"1px solid #6459ed",color:"#6459ed"},nonactiveStyle:{borderBottom:"none",color:"#000000"}}},computed:Object(u["a"])({},Object(c["d"])("login",{loginUsername:function(e){return e.loginUsername},loginPassword:function(e){return e.loginPassword},registerUsername:function(e){return e.registerUsername},registerPassword:function(e){return e.registerPassword},registerPassword2:function(e){return e.registerPassword2},loginError:function(e){return e.loginError},registerError:function(e){return e.registerError}})),methods:Object(u["a"])({},Object(c["b"])("login",["login","register"]),Object(c["c"])("login",["updateLoginUsername","updateLoginPassword","updateRegisterUsername","updateRegisterPassword","updateRegisterPassword2"]),{updateUser:function(e){this.updateLoginUsername(e.target.value)},updatePassword:function(e){this.updateLoginPassword(e.target.value)},updateUser1:function(e){this.updateRegisterUsername(e.target.value)},updatePassword1:function(e){this.updateRegisterPassword(e.target.value)},updatePassword2:function(e){this.updateRegisterPassword2(e.target.value)},handleLogin:function(){this.login()},handleRegister:function(){this.register()}})},k=_,x=(r("b5f3"),Object(p["a"])(k,P,y,!1,null,"382b1068",null)),O=x.exports,U=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"home"}},[r("list")],1)},j=[],E=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"title"},[e._v("设备栏")]),n("div",{staticClass:"wrapper"},e._l(e.deviceList,function(t,a){return n("b-card",{key:a,staticClass:"mb-2 mr-4 item",staticStyle:{"max-width":"20rem"},attrs:{title:t.serialNumber?t.serialNumber:t.alias,"img-src":r("7da1"),"img-alt":"Image","img-top":"",tag:"div"}},[n("p",{staticClass:"card-text"},[e._v(e._s(t.status))])])}))])},C=[];r("e7ee");var L={name:"DeviceList",data:function(){return{baseUrl:"./../../../../public/device_icon/"}},mounted:function(){this.getDevices()},computed:Object(u["a"])({},Object(c["d"])("home",["deviceList"])),methods:Object(u["a"])({},Object(c["b"])("home",["getDevices"]))},R=L,S=(r("576e"),Object(p["a"])(R,E,C,!1,null,"194d4c36",null)),I=S.exports,D={name:"Home",components:{List:I}},T=D,N=(r("2eac"),Object(p["a"])(T,U,j,!1,null,"2ff34480",null)),M=N.exports;n["a"].use(w["a"]);var $=new w["a"]({routes:[{path:"/",name:"login",component:O},{path:"/home",name:"home",component:M}]}),B=r("bc3a"),H=r.n(B),J=function(){return H.a.create({baseURL:"/api",headers:{Authorization:"Bearer ".concat(G.state.token)}})},z={loginUsername:null,loginPassword:null,registerUsername:null,registerPassword:null,registerPassword2:null,loginError:null,registerError:null,token:null},A={},F={login:function(e){var t=e.state,r=e.commit;return J().post("/auth/login",{username:t.loginUsername,password:t.loginPassword}).then(function(e){r("setToken",e.data.token),r("updateLoginPassword",null),$.push("/home")}).catch(function(e){var t=e.response,n=t.data[0].message;"Cannot find user with provided username"===n?r("setLoginError","用户名不存在"):"Invalid user password"===n&&r("setLoginError","密码错误")})},register:function(e){var t=e.state,r=e.commit;if(t.registerPassword===t.registerPassword2)return J().post("/auth/register",{username:t.registerUsername,password:t.registerPassword}).then(function(e){r("setToken",e.data.token),$.push("/home")}).catch(function(e){r("setRegisterError","账号已存在")});r("setRegisterError","密码需一致")}},q={updateLoginUsername:function(e,t){e.loginUsername=t},updateLoginPassword:function(e,t){e.loginPassword=t},updateRegisterUsername:function(e,t){e.registerUsername=t},updateRegisterPassword:function(e,t){e.registerPassword=t},updateRegisterPassword2:function(e,t){e.registerPassword2=t},setToken:function(e,t){e.token=t},setLoginError:function(e,t){e.loginError=t},setRegisterError:function(e,t){e.registerError=t},logout:function(e){e.token=null,$.push("/")}},G={namespaced:!0,state:z,getters:A,actions:F,mutations:q},K={deviceList:null},Q={},V={getDevices:function(e){e.state;var t=e.commit;return J().get("/devices").then(function(e){var r=e.data;console.log(r),t("setDeviceList",r)}).catch(function(e){console.log(e)})}},W={setDeviceList:function(e,t){e.deviceList=t}},X={namespaced:!0,state:K,getters:Q,actions:V,mutations:W};n["a"].use(c["a"]);var Y=new c["a"].Store({modules:{login:G,home:X},state:{},mutations:{},actions:{}}),Z=r("9f7b");r("f9e3"),r("2dd8"),r("b277"),r("4ee2"),r("3a10");n["a"].use(Z["a"]),n["a"].config.productionTip=!1,new n["a"]({router:$,store:Y,render:function(e){return e(h)}}).$mount("#app")},"576e":function(e,t,r){"use strict";var n=r("7ce6"),a=r.n(n);a.a},"7ce6":function(e,t,r){},"7da1":function(e,t,r){e.exports=r.p+"img/C1.dff30799.png"},a72c:function(e,t,r){},b277:function(e,t,r){},b5f3:function(e,t,r){"use strict";var n=r("20ba"),a=r.n(n);a.a},e7ee:function(e,t){function r(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}r.keys=function(){return[]},r.resolve=r,e.exports=r,r.id="e7ee"}});
//# sourceMappingURL=app.ed132866.js.map